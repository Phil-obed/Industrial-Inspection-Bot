<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bot with Sensor Arcs</title>
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: #111;
    }

    .bot-container {
      position: relative;
      width: 400px;
      height: 500px;
    }

    /* --- ARCS --- */
    .arcs {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0; /* behind bot images */
    }
    svg { 
      width: 100%; 
      height: 100%; 
      transform: translateX(3px); /* shift arcs to the right by ~5px */
    }
    .wedge { fill: #ccc; opacity: 0.2; stroke: none; }

    /* --- BOT IMAGES --- */
    .bot-img{
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 250px;
      height: 250px;
      object-fit: contain;
      filter: brightness(0) invert(1); /* make images white */
    }

    .wheels-img {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) translateX(-2px); /* move wheels left by 10px */
      width: 250px;
      height: 250px;
      object-fit: contain;
      filter: brightness(0) invert(1); /* make images white */
      z-index: 1;
    }


    .bot-img { z-index: 2; }
    .wheels-img { z-index: 1; }
  </style>
</head>
<body>
  <div class="bot-container">
    <!-- Arcs layer -->
    <div class="arcs">
      <svg id="svg" viewBox="-6 -6 12 12" preserveAspectRatio="xMidYMid meet"
           xmlns="http://www.w3.org/2000/svg" aria-label="Sensor arcs">
      </svg>
    </div>

    <!-- Bot images -->
    <img src="../images/bot.png" alt="Bot body" class="bot-img" />
    <img src="../images/wheels.png" alt="Bot wheels" class="wheels-img" />
  </div>

<script>
const sensors = [
  { x: 0.00,  y: 2.5,  angle:  90, max_r: 4.0, fov: 30 },
  { x: -1.75, y: 2.5,  angle: 110, max_r: 4.0, fov: 30 },
  { x:  1.75, y: 2.5,  angle:  70, max_r: 4.0, fov: 30 },
  { x: -1.75, y: 0.0,  angle: 180, max_r: 3.0, fov: 30 },
  { x:  1.75, y: 0.0,  angle:   0, max_r: 3.0, fov: 30 },
];

const svg = document.getElementById('svg');

function polarToSvg(cx, cy, radius, angleDeg) {
  const cx_svg = cx;
  const cy_svg = -cy;
  const rad = angleDeg * Math.PI / 180;
  const x = cx_svg + radius * Math.cos(rad);
  const y = cy_svg - radius * Math.sin(rad);
  return { x, y };
}

function makeWedgePath(cx, cy, radius, startAngle, endAngle) {
  const start = polarToSvg(cx, cy, radius, startAngle);
  const end   = polarToSvg(cx, cy, radius, endAngle);

  let fov = endAngle - startAngle;
  if (fov < 0) fov += 360;
  const largeArcFlag = (fov > 180) ? 1 : 0;
  const sweepFlag = 0;

  return `M ${cx} ${-cy} L ${start.x} ${start.y} A ${radius} ${radius} 0 ${largeArcFlag} ${sweepFlag} ${end.x} ${end.y} Z`;
}

// Draw arcs (no dots now)
sensors.forEach(s => {
  const cx = s.x, cy = s.y, angle = s.angle, fov = s.fov, maxR = s.max_r;
  const startAngle = angle - fov/2;
  const endAngle = angle + fov/2;

  const path = makeWedgePath(cx, cy, maxR, startAngle, endAngle);
  const wedge = document.createElementNS('http://www.w3.org/2000/svg','path');
  wedge.setAttribute('d', path);
  wedge.setAttribute('class', 'wedge');
  svg.appendChild(wedge);

    // border at the tip (straight line across the arc opening)
  const startTip = polarToSvg(cx, cy, maxR, startAngle);
  const endTip   = polarToSvg(cx, cy, maxR, endAngle);

  const tipLine = document.createElementNS('http://www.w3.org/2000/svg','line');
  tipLine.setAttribute('x1', startTip.x);
  tipLine.setAttribute('y1', startTip.y);
  tipLine.setAttribute('x2', endTip.x);
  tipLine.setAttribute('y2', endTip.y);
  tipLine.setAttribute('class', 'arc-border');
  svg.appendChild(tipLine);

});
</script>
</body>
</html>
